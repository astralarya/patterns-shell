# patterns-shell/templates

**patterns-shell/templates** - Code generators for shell patterns

## pgdb
### template-db
Generate function to access a database as a user  
Usage: template-db *name* *user* [funcname]  
  * $1 database name
  * $2 database user
  * $3 database function name (default $1)

This template generates one function
  * dbfuncname [OPTION] [queryfile]  
    If a file is given as an argument, execute the queries in the file,  
    otherwise start a psql session connected to database.
    * -t time query or session
    * -h show help  


### template-dbbackup
Generate a function to backup a database  
Usage: template-dbbackup *name* *superuser* *backupdir* [funcname]
  * $1 database name
  * $2 database superuser
  * $3 backup directory (absolute path, no trailing slash)
  * $4 generated function name (default ${1}backup)

This template generates one function
  * dbbackupfunc [OPTION] [file]  
    Backup or restore $MYDB.  
    If no arguments given, make dated backup in $3  
    otherwise, execute according the options below.  
    * -b backup database to file
    * -r restore datase from file

## remote
### template-remote
Generate functions to connect to a server via SSH, and push/pull files via SCP  
Usage: template-remote *connection* *server* *user* *scpdir*
* $1 connection function name, as well as the base for the \*-push/pull functions
* $2 SSH/SCP server address
* $3 remote username
* $4 remote directory for SCP push/pull

There are three functions generated by this template
  * connection [OPTION] [command]  
    If a command is given, execute it remotely,  
    otherwise start an SSH session
    * -h show help
    * -X enable X11 forwarding
  * connection-push *file*  
    Push file to remote directory on server
  * connection-pull *file*  
    Pull file from remote directory on server


## sourcedir
### template-sourcedir
Generate statements to source all files in a directory  
Usage: template-sourcedir *dir*
* $1 directory to source

NOTE: this template function does not behave correctly in process substitution
Save the output to a file and source that instead
